var player=null;var playerId="dood";var playerAreaId="playerSpot";function playerReady(a){player=swfobject.getObjectById(playerId);if(!player){player=document.getElementById(playerId)}Player.init()}var Player=function(){var a="NONE";var b=false;return{create:function(){var h="lib/player-4.2.90.swf";var f="100%";var c=20;var e="7.0.0";var g=false;var j={file:"",bufferlength:"5"};var i={allowscriptaccess:"always",allowfullscreen:"false"};var d={id:playerId,name:playerId};swfobject.embedSWF(h,playerAreaId,f,c,e,g,j,i,d)},init:function(){if(player){player.addModelListener("STATE","Player.trackers.stateTracker");Playlist.refresh(true);var c=Template.processTemplate("marqueeTemplate",{artist:"",title:"",album:""});Player.setMarquee(c)}else{alert("Unable to find player.")}},random:function(c){b=c},repeat:function(c){if(c){a=c.toUpperCase()}else{return a}},restart:function(){swfobject.removeSWF(playerId);$("#playerWrapper").append('<div id="'+playerAreaId+'">player</div>');Player.create()},setMarquee:function(c){$("#marquee").html(c)},controls:{next:function(){var c=Playlist._playingIdx+1;var d=a=="NONE"&&c>=Playlist._playlist.length;if(!d){if(b){do{c=Math.round(Math.random()*(Playlist._playlist.length-1))}while(c==Playlist._playingIdx)}Player.controls.play(c)}},play:function(c){if(!isNaN(c)){if(c<0){Playlist._playingIdx=Playlist._playlist.length-(Math.abs(c)%Playlist._playlist.length)}else{if(c>0){Playlist._playingIdx=c%Playlist._playlist.length}else{Playlist._playingIdx=c}}}Playlist._playingIdx=Math.max(0,Playlist._playingIdx);Playlist._playingIdx=Math.min(Playlist._playingIdx,Playlist._playlist.length-1);var e=Playlist._playlist[Playlist._playingIdx];player.sendEvent("LOAD",[e]);player.sendEvent("PLAY",true);Playlist.highlightPlaying();var d=Template.processTemplate("marqueeTemplate",e);Player.setMarquee(d)},prev:function(){Player.controls.play(Playlist._playingIdx-1)}},trackers:{nextTracker:function(c){Player.controls.next()},prevTracker:function(c){Player.controls.prev()},stateTracker:function(c){if(c.newstate=="COMPLETED"){if(a=="SONG"){Player.controls.play()}else{Player.controls.next()}}}}}}();$(document).ready(function(){Player.create()});