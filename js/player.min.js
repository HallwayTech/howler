var player=null;var playerId="dood";var playerAreaId="playerSpot";function playerReady(a){player=swfobject.getObjectById(playerId);if(!player){player=document.getElementById(playerId)}Player.init()}var Player=function(){var a="NONE";var c=false;var b=null;return{create:function(){var i="lib/player-4.2.90.swf";var g="100%";var d=20;var f="7.0.0";var h=false;var k={file:"",bufferlength:"5"};var j={allowscriptaccess:"always",allowfullscreen:"false"};var e={id:playerId,name:playerId};swfobject.embedSWF(i,playerAreaId,g,d,f,h,k,j,e)},init:function(){if(player){player.addModelListener("STATE","Player.trackers.stateTracker");Playlist.refresh(true);var d=Template.processTemplate("marqueeTemplate",{artist:"",title:"",album:""});Player.setMarquee(d)}else{alert("Unable to find player.")}},random:function(d){if(typeof(d)!="undefined"){c=d;if(b!="PLAYING"){Player.controls.next()}}else{return c}},repeat:function(d){if(d){a=d.toUpperCase()}else{return a}},restart:function(){swfobject.removeSWF(playerId);$("#playerWrapper").append('<div id="'+playerAreaId+'">player</div>');Player.create()},setMarquee:function(d){$("#marquee").html(d)},controls:{next:function(){var d=Playlist._playingIdx+1;var e=a=="NONE"&&d>=Playlist._playlist.length;if(!e){if(c){do{d=Math.round(Math.random()*(Playlist._playlist.length-1))}while(d==Playlist._playingIdx)}Player.controls.play(d)}},play:function(d){if(!isNaN(d)){if(d<0){Playlist._playingIdx=Playlist._playlist.length-(Math.abs(d)%Playlist._playlist.length)}else{if(d>0){Playlist._playingIdx=d%Playlist._playlist.length}else{Playlist._playingIdx=d}}}Playlist._playingIdx=Math.max(0,Playlist._playingIdx);Playlist._playingIdx=Math.min(Playlist._playingIdx,Playlist._playlist.length-1);var f=Playlist._playlist[Playlist._playingIdx];player.sendEvent("LOAD",[f]);player.sendEvent("PLAY",true);Playlist.highlightPlaying();var e=Template.processTemplate("marqueeTemplate",f);Player.setMarquee(e)},prev:function(){Player.controls.play(Playlist._playingIdx-1)}},trackers:{nextTracker:function(d){Player.controls.next()},prevTracker:function(d){Player.controls.prev()},stateTracker:function(d){b=d.newstate;if(b=="COMPLETED"){if(a=="SONG"){Player.controls.play()}else{Player.controls.next()}}}}}}();$(document).ready(function(){Player.create()});