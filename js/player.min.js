var player=null;var playerId="dood";var playerAreaId="playerSpot";function playerReady(a){player=swfobject.getObjectById(playerId);if(!player){player=document.getElementById(playerId)}Player.init()}var Player=function(){var c=5;var a="LIST";var e=false;var b=null;var d=[];return{create:function(){var k="lib/player-4.2.90.swf";var i="100%";var f=20;var h="7.0.0";var j=false;var m={file:"",bufferlength:"5"};var l={allowscriptaccess:"always",allowfullscreen:"false"};var g={id:playerId,name:playerId};swfobject.embedSWF(k,playerAreaId,i,f,h,j,m,l,g)},init:function(){if(player){player.addModelListener("STATE","Player.trackers.stateTracker");Playlist.refresh(true);var f=Template.processTemplate("marqueeTemplate",{artist:"",title:"",album:""});Player.setMarquee(f)}else{alert("Unable to find player.")}},random:function(f){if(typeof(f)!="undefined"){e=f;if(e&&b!="PLAYING"){Player.controls.next()}}else{return e}},repeat:function(f){if(f){a=f.toUpperCase()}else{return a}},restart:function(){swfobject.removeSWF(playerId);$("#playerWrapper").append('<div id="'+playerAreaId+'">player</div>');Player.create()},setMarquee:function(f){$("#marquee").html(f)},controls:{next:function(){var f=Playlist._playingIdx+1;var g=a=="NONE"&&f>=Playlist._playlist.length;if(!g){if(e){do{f=Math.round(Math.random()*(Playlist._playlist.length-1))}while(f==Playlist._playingIdx||d[f]);d.push(f);while(d.length>c){d.shift()}}Player.controls.play(f)}},play:function(f){if(!isNaN(f)){if(f<0){Playlist._playingIdx=Playlist._playlist.length-(Math.abs(f)%Playlist._playlist.length)}else{if(f>0){Playlist._playingIdx=f%Playlist._playlist.length}else{Playlist._playingIdx=f}}}Playlist._playingIdx=Math.max(0,Playlist._playingIdx);Playlist._playingIdx=Math.min(Playlist._playingIdx,Playlist._playlist.length-1);var h=Playlist._playlist[Playlist._playingIdx];player.sendEvent("LOAD",[h]);player.sendEvent("PLAY",true);Playlist.highlightPlaying();var g=Template.processTemplate("marqueeTemplate",h);Player.setMarquee(g)},prev:function(){Player.controls.play(Playlist._playingIdx-1)}},trackers:{nextTracker:function(f){Player.controls.next()},prevTracker:function(f){Player.controls.prev()},stateTracker:function(f){b=f.newstate;if(b=="COMPLETED"){if(a=="SONG"){Player.controls.play()}else{Player.controls.next()}}}}}}();$(document).ready(function(){Player.create()});