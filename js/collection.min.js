var Collection=function(){var c={dir:"",search:""};var g={dir:"",search:""};var b="";var e={};var d={items:["#","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]};function a(j,i){var h="collection.php?";h+="d="+encodeURIComponent(j)+"&";h+="s="+encodeURIComponent(i);return h}function f(i){var h=Template.processTemplate("collectionTemplate",e[b]);i.html(h);$("body").css("cursor","auto")}return{init:function(){var h=Template.processTemplate("alphaNavTemplate",d);$("#alphaNav").html(h)},goBack:function(){Collection.view({dir:-1})},view:function(i){$("body").css("cursor","wait");var h=$("#output");h.html("Loading...");var k="";var j="";if(i.dir){if(i.dir==-1){k=g.dir}else{k=e[b].d[i.dir].d}j=g.search}else{if(i.search){j=i.search}}g=c;if(c.search==g.search&&c.dir&&g.dir){g.search=""}c.dir=(k!="")?k.substring(0,k.lastIndexOf("/")):"";c.search=j;b=a(k,j);if(e[b]){f(h)}else{Collection.refresh()}},addSong:function(i){var m=e[b].f[i];var j=m.p;var l={file:j};l.album=m.l;if(m.a){l.artist=m.a}if(m.t){l.title=m.t}else{var h=j.lastIndexOf("/");var n=j.lastIndexOf(".");var k=j.substring(h+1,n);l.title=k}Playlist.addItem(l)},addAll:function(){Playlist.holdRefresh();$(".fileAdd").each(function(h){this.onclick()});Playlist.allowRefresh(true)},refresh:function(){$.getJSON(b,function(h,i){e[b]=h;f($("#output"))})}}}();$(document).ready(function(){Collection.init()});